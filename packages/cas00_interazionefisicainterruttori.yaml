
#   ____             _            ___       _                      _   _               ____       _        _ _ 
#  |  _ \  _____   _(_) ___ ___  |_ _|_ __ | |_ ___ _ __ __ _  ___| |_(_) ___  _ __   |  _ \  ___| |_ __ _(_) |
#  | | | |/ _ \ \ / / |/ __/ _ \  | || '_ \| __/ _ \ '__/ _` |/ __| __| |/ _ \| '_ \  | | | |/ _ \ __/ _` | | |
#  | |_| |  __/\ V /| | (_|  __/  | || | | | ||  __/ | | (_| | (__| |_| | (_) | | | | | |_| |  __/ || (_| | | |
#  |____/ \___| \_/ |_|\___\___| |___|_| |_|\__\___|_|  \__,_|\___|\__|_|\___/|_| |_| |____/ \___|\__\__,_|_|_|
#                                                                                                              

input_select:
  tavolo_soggiorno_int:
    name: Interazione Tavolo Soggiorno
    options:
      - manuale
      - automatico
      - sconosciuto
    initial: sconosciuto    
  led_bagno_giovanna_e_nicola_int:
    name: Interazione Led Bagno Giovanna e Nicola
    options:
      - manuale
      - automatico
      - sconosciuto
    initial: sconosciuto    
  areatore_bagno_giovanna_e_nicola_int:
    name: Interazione Areatore Bagno Giovanna e Nicola
    options:
      - manuale
      - automatico
      - sconosciuto
  cespuglio_ingresso_int:
    name: Interazione Cespuglio Divano
    options:
      - manuale
      - automatico
      - sconosciuto
  cespuglio_divano_int:
    name: Interazione Cespuglio Ingresso
    options:
      - manuale
      - automatico
      - sconosciuto
  luce_cucina_int:
    name: Interazione Luce Cucina
    options:
      - manuale
      - automatico
      - sconosciuto
  led_pensili_int:
    name: Interazione Led Pensili
    options:
      - manuale
      - automatico
      - sconosciuto
  faretti_idromassaggio_int:
    name: Interazione Faretti Idromassaggio
    options:
      - manuale
      - automatico
      - sconosciuto
  faretti_letto_giovanna_e_nicola_int:
    name: Interazione Faretti Letto Giovanna e Nicola
    options:
      - manuale
      - automatico
      - sconosciuto
  faretti_luce_segnapassi_int:
    name: Interazione Luce Segnapassi
    options:
      - manuale
      - automatico
      - sconosciuto
  luce_ingresso_int:
    name: Interazione Luce Ingresso
    options:
      - manuale
      - automatico
      - sconosciuto
  lampadario_beatrice_int:
    name: Interazione Faretti Lampadario Beatrice
    options:
      - manuale
      - automatico
      - sconosciuto
  faretti_alessandro_int:
    name: Interazione Faretti Faretti Alessandro
    options:
      - manuale
      - automatico
      - sconosciuto
  faretti_interno_cabina_int:
    name: Interazione Faretti Faretti Interno Cabina
    options:
      - manuale
      - automatico
      - sconosciuto
  faretti_esterno_cabina_int:
    name: Interazione Faretti Esterno Cabina
    options:
      - manuale
      - automatico
      - sconosciuto

template:
  - sensor:
      - name: "Modalità Interazione Tavolo Soggiorno"
        state: "{{ states('input_select.tavolo_soggiorno_int') }}"
      - name: "Modalità Interazione Led Bagno Giovanna e Nicola"
        state: "{{ states('input_select.led_bagno_giovanna_e_nicola_int') }}"
      - name: "Modalità Interazione Areatore Bagno Giovanna e Nicola"
        state: "{{ states('input_select.areatore_bagno_giovanna_e_nicola_int') }}"
      - name: "Modalità Interazione Cespuglio Divano"
        state: "{{ states('input_select.cespuglio_divano_int') }}"
      - name: "Modalità Interazione Cespuglio Ingresso"
        state: "{{ states('input_select.cespuglio_ingresso_int') }}"
      - name: "Modalità Interazione Luce Cucina"
        state: "{{ states('input_select.luce_cucina_int') }}"
      - name: "Modalità Interazione Led Pensili"
        state: "{{ states('input_select.led_pensili_int') }}"
      - name: "Modalità Interazione Faretti Idromassaggio"
        state: "{{ states('input_select.faretti_idromassaggio_int') }}"
      - name: "Modalità Interazione Faretti Letto Giovanna e Nicola"
        state: "{{ states('input_select.faretti_letto_giovanna_e_nicola_int') }}"
      - name: "Modalità Interazione Luce Segnapassi"
        state: "{{ states('input_select.luce_segnapassi_int') }}"
      - name: "Modalità Interazione Luce Ingresso"
        state: "{{ states('input_select.luce_ingresso_int') }}"
      - name: "Modalità Interazione Lampadario Beatrice"
        state: "{{ states('input_select.lampadario_beatrice_int') }}"
      - name: "Modalità Interazione Faretti Alessandro"
        state: "{{ states('input_select.faretti_alessandro_int') }}"
      - name: "Modalità Interazione Faretti Interno Cabina"
        state: "{{ states('input_select.faretti_interno_cabina_int') }}"
      - name: "Modalità Interazione Faretti Esterno Cabina"
        state: "{{ states('input_select.faretti_esterno_cabina_int') }}"

automation:
  - id: CAS0_01 Aggiornamento Modalità Interazione Tavolo Soggiorno
    alias: "Aggiornamento Modalità Interazione Tavolo Soggiorno"
    description: ""
    trigger:
    - platform: state
      entity_id: light.relay_luce_tavolo_soggiorno
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.tavolo_soggiorno_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.tavolo_soggiorno_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.tavolo_soggiorno_int
                option: automatico
    mode: single

  - id: CAS0_02 Aggiornamento Modalità Interazione Led Bagno Giovanna e Nicola
    alias: "Aggiornamento Modalità Interazione Led Bagno Giovanna e Nicola"
    description: ""
    trigger:
    - platform: state
      entity_id: fan.areatore_bagno
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.led_bagno_giovanna_e_nicola_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.led_bagno_giovanna_e_nicola_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.led_bagno_giovanna_e_nicola_int
                option: automatico
    mode: single

  - id: CAS0_03
    alias: "CAS0_03 - Aggiornamento Modalità Intera zione Tavolo Soggiorno"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.areatore_led_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.areatore_bagno_giovanna_e_nicola_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.areatore_bagno_giovanna_e_nicola_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.areatore_bagno_giovanna_e_nicola_int
                option: automatico
    mode: single

  - id: CAS0_04
    alias: "CAS0_04 - Aggiornamento Modalità Interazione Cespuglio Divano"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.cespugli
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.cespuglio_divano_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.cespuglio_divano_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.cespuglio_divano_int
                option: automatico
    mode: single

  - id: CAS0_05
    alias: "CAS0_05 - Aggiornamento Modalità Interazione Cespuglio Ingresso"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.cespugli_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.cespuglio_ingresso_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.cespuglio_ingresso_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.cespuglio_ingresso_int
                option: automatico
    mode: single

  - id: CAS0_06
    alias: "CAS0_06 - Aggiornamento Modalità Interazione Luce Cucina"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.cucina_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_cucina_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_cucina_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_cucina_int
                option: automatico
    mode: single

  - id: CAS0_07
    alias: "CAS0_07 - Aggiornamento Modalità Interazione Led Pensili"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.cucina_2_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.led_pensili_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.led_pensili_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.led_pensili_int
                option: automatico
    mode: single

  - id: CAS0_08
    alias: "CAS0_08 - Aggiornamento Modalità Interazione Faretti Idromassaggio"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.node_11
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_idromassaggio_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_idromassaggio_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_idromassaggio_int
                option: automatico
    mode: single

  - id: CAS0_09
    alias: "CAS0_09 - Aggiornamento Modalità Interazione Faretti Letto Giovanna e Nicola"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.node_11_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_letto_giovanna_e_nicola_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_letto_giovanna_e_nicola_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_letto_giovanna_e_nicola_int
                option: automatico
    mode: single

  - id: CAS0_10
    alias: "CAS0_10 - Aggiornamento Modalità Interazione Luce Segnapassi"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.node_13
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_segnapassi_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_segnapassi_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_segnapassi_int
                option: automatico
    mode: single

  - id: CAS0_11
    alias: "CAS0_11 - Aggiornamento Modalità Interazione Luce Ingresso"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.node_13_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_ingresso_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_ingresso_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.luce_ingresso_int
                option: automatico
    mode: single

  - id: CAS0_12
    alias: "CAS0_12 - Aggiornamento Modalità Interazione Lampadario Beatrice"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.double_switch_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.lampadario_beatrice_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.lampadario_beatrice_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.lampadario_beatrice_int
                option: automatico
    mode: single

  - id: CAS0_13
    alias: "CAS0_13 - Aggiornamento Modalità Interazione Faretti Alessandro"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.double_switch_2_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_alessandro_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_alessandro_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_alessandro_int
                option: automatico
    mode: single

  - id: CAS0_14
    alias: "CAS0_14 - Aggiornamento Modalità Interazione Faretti Interno Cabina"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.cabina
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_interno_cabina_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_interno_cabina_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_interno_cabina_int
                option: automatico
    mode: single

  - id: CAS0_15
    alias: "CAS0_15 - Aggiornamento Modalità Interazione Faretti Esterno Cabina"
    description: ""
    trigger:
    - platform: state
      entity_id: switch.cabina_2
    condition: []
    action:
      - choose:
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
            - condition: template
              value_template: "{{ trigger.to_state.context.parent_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_esterno_cabina_int
                option: manuale
        - conditions:
            - condition: template
              value_template: "{{ trigger.to_state.context.user_id == none }}"
          sequence:
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_esterno_cabina_int
                option: automatico
        default: 
            - service: input_select.select_option
              data:
                entity_id: input_select.faretti_esterno_cabina_int
                option: automatico
    mode: single